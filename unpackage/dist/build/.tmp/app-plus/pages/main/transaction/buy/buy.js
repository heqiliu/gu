(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/main/transaction/buy/buy"],{7076:function(t,e,o){"use strict";(function(t){o("4851"),o("921b");s(o("66fd"));var e=s(o("f2fb"));function s(t){return t&&t.__esModule?t:{default:t}}t(e.default)}).call(this,o("6e42")["createPage"])},"86d1":function(t,e,o){},ad1c:function(t,e,o){"use strict";o.r(e);var s=o("bf7d"),a=o.n(s);for(var i in s)"default"!==i&&function(t){o.d(e,t,function(){return s[t]})}(i);e["default"]=a.a},bf7d:function(t,e,o){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(o("287b"));function a(t){return t&&t.__esModule?t:{default:t}}var i=function(){return o.e("components/cmd-nav-bar/cmd-nav-bar").then(o.bind(null,"e3e0"))},n={components:{cmdNavBar:i},data:function(){return{missVal:"",missShow:!1,stockInfo:{buyPrices:[0,0,0,0,0],buyAmounts:[0,0,0,0,0],sellPrices:[0,0,0,0,0],sellAmounts:[0,0,0,0,0]},available:0,buyPrice:"",buyNum:"",stocks:[],stocksWant:[],buysData:[],buyInbfb:1,multiple:8,isRouterAlive:!0}},watch:{buyPrice:function(t,e){this.buyNum=parseInt(100*Math.floor(this.available*this.multiple/this.buyPrice/this.buyInbfb/100)*1)/1}},methods:{treChange:function(t){this.buyPrice=this.stockInfo.instantPrice},buyInChange:function(t){this.buyInbfb=t.target.value,this.buyNum=parseInt(100*Math.floor(this.available*this.multiple/this.buyPrice/t.target.value/100)*1)/1},refresh:function(){6==this.missVal.length&&this.queryStock(this.missVal)},priceDelAdd:function(t){"del"==t?this.buyPrice=(Number(this.buyPrice)-.01).toFixed(2):"add"==t&&(this.buyPrice=(Number(this.buyPrice)+.01).toFixed(2))},numDelAdd:function(t){"del"==t?this.buyNum=Number(this.buyNum)-100:"add"==t&&(this.buyNum=Number(this.buyNum)+100)},bitListen:function(t){var e=t.target.value,o=[];this.stocks.forEach(function(t,s){-1!=t.stockCode.indexOf(e)&&o.push(t)}),o=o.slice(0,5),this.stocksWant=o,this.stocksWant.length>0?this.missShow=!0:this.missShow=!1,6==e.length&&this.queryStock(e)},priceCheck:function(e){this.buyPrice=Number(this.buyPrice).toFixed(2),e.target.value<0&&t.showToast({position:"bottom",title:"买入价格不能小于0",icon:"none",duration:2500})},numCheck:function(t){},selectThis:function(t){this.missShow=!1,this.queryStock(t)},queryStock:function(e){var o=this;s.default.get("AppPortfolioPage/buy",{stockCode:e}).then(function(e){e.data.success?(void 0!=e.data.data.quote&&(o.stockInfo=e.data.data.quote,o.missVal=o.stockInfo.stockCode,o.buyPrice=o.stockInfo.instantPrice,o.available=e.data.data.userAssetsVo.money,o.multiple=e.data.data.multiple),void 0!=e.data.data.stockHoldVoList&&(o.buysData=e.data.data.stockHoldVoList,o.stocks=e.data.data.stockHoldVoList)):t.showToast({position:"bottom",title:"没有查询到当前股票代码",icon:"none",duration:2500})})},immediatelyBuy:function(){if(void 0!=this.stockInfo.stockCode&&""!=this.stockInfo.stockCode)if(Number(this.buyPrice)<0||NaN==Number(this.buyPrice)||""==this.buyPrice)t.showModal({title:"提示",content:"请输入正确的买入价",showCancel:!1});else if(this.buyNum%100!=0||Number(this.buyNum)<=0||""==this.buyNum)t.showModal({title:"提示",content:"买入数量只能是100的倍数！",showCancel:!1});else if(Number(this.buyNum)>parseInt(this.available*this.multiple/this.buyPrice*1)/1)t.showModal({title:"提示",content:"不能超过最大可买数！",showCancel:!1});else{var e=this;t.showModal({title:"请确认",content:"是否买入【"+this.stockInfo.stockName+"】,代码【"+this.stockInfo.stockCode+"】,买入价【"+this.buyPrice+"】,买入数量【"+this.buyNum+"】",success:function(o){o.confirm?(t.showLoading({title:"提交中~"}),s.default.get("stock/order/add",{stockCode:e.stockInfo.stockCode,orderUnitPrice:e.buyPrice,orderNumber:e.buyNum,orderType:"BUY"}).then(function(e){e.data.success&&(t.showModal({title:"提示",content:"购买成功",showCancel:!1}),t.redirectTo({url:"/pages/main/transaction/buy/buy"}))})):o.cancel}})}else t.showModal({title:"提示",content:"请选择您要买入的股票",showCancel:!1})},cancellations:function(t,e){this.queryStock(t.stockCode),this.maxSale=t.sharesNumber},getHasStock:function(){var t=this;s.default.get("stock/hold/getList",{"pageInfo.size":100,"pageInfo.num":1,"pageInfo.isReturnPage":!1}).then(function(e){t.buysData=e.data.data.records,t.stocks=e.data.data.records})},cancellation:function(e,o){if(0==e.orderStatus.value){var a=this;t.showModal({title:"请确认",content:"是否撤单【"+e.stockName+"/"+e.stockCode+"】",success:function(o){o.confirm&&s.default.get("stock/order/cancellations",{id:e.id+""}).then(function(e){e.data.success&&(t.showModal({title:"提示",content:e.data.message,showCancel:!1}),a.queryStock(""))})}})}}},onLoad:function(e){var o=this;t.showLoading({mask:!0}),"zxgp"==e.type&&(this.queryStock(e.stockCode),this.maxSale=e.maxSale,s.default.get("AppPortfolioPage/sell",{stockCode:e.stockCode}).then(function(t){void 0!=t.data.data.quote&&(o.stockInfo=t.data.data.quote,o.missVal=o.stockInfo.stockCode,o.buyPrice=o.stockInfo.instantPrice,o.available=t.data.data.userAssetsVo.netAsset),void 0!=t.data.data.stockHoldVoList&&(o.buysData=t.data.data.stockHoldVoList,o.stocks=t.data.data.stockHoldVoList)})),this.getHasStock()}};e.default=n}).call(this,o("6e42")["default"])},c631:function(t,e,o){"use strict";var s={"cmd-nav-bar":()=>o.e("components/cmd-nav-bar/cmd-nav-bar").then(o.bind(null,"e3e0"))},a=function(){var t=this,e=t.$createElement,o=(t._self._c,parseInt(t.available*t.multiple/t.buyPrice-t.available*t.multiple/t.buyPrice%100*1));t.$mp.data=Object.assign({},{$root:{m0:o}})},i=[];o.d(e,"b",function(){return a}),o.d(e,"c",function(){return i}),o.d(e,"a",function(){return s})},f2fb:function(t,e,o){"use strict";o.r(e);var s=o("c631"),a=o("ad1c");for(var i in a)"default"!==i&&function(t){o.d(e,t,function(){return a[t]})}(i);o("ff35");var n,c=o("f0c5"),u=Object(c["a"])(a["default"],s["b"],s["c"],!1,null,"74da5e18",null,!1,s["a"],n);e["default"]=u.exports},ff35:function(t,e,o){"use strict";var s=o("86d1"),a=o.n(s);a.a}},[["7076","common/runtime","common/vendor"]]]);